import { eduDataParser } from './eduDataParser';

describe('Edu detail data parser', () => {
  it('should receive detail data and return parsed result', () => {
    const jsonData = {
      '2013.student.demographics.race_ethnicity.non_resident_alien': 0.1051,
      '2010.student.demographics.men': 0.4962,
      '2009.aid.students_with_any_loan': 0.5790816327,
      '2010.student.demographics.women': 0.5038,
      '2010.student.demographics.race_ethnicity.asian': 0.1414,
      '2007.cost.tuition.out_of_state': 34530,
      '2012.admissions.admission_rate.overall': 0.0773,
      '2009.student.demographics.race_ethnicity.asian': 0,
      '2015.aid.students_with_any_loan': 0.4772727273,
      '2014.student.demographics.race_ethnicity.asian': 0.1655,
      '2012.student.demographics.race_ethnicity.asian': 0.1608,
      '2010.student.demographics.race_ethnicity.non_resident_alien': 0.0982,
      '2010.student.demographics.race_ethnicity.black': 0.0597,
      '2009.student.grad_students': 6318,
      '2012.student.size': 5397,
      '2015.admissions.sat_scores.average.overall': 1498,
      '2008.student.size': 5256,
      '2014.student.demographics.men': 0.5098,
      '2008.completion.completion_rate_4yr_100nt': 0.8960739030023,
      '2007.student.demographics.race_ethnicity.black_non_hispanic': 0.0877,
      id: 130794,
      '2010.completion.completion_rate_4yr_100nt': 0.88897396630934,
      '2008.admissions.sat_scores.average.overall': 1481,
      '2009.student.demographics.men': 0.5013,
      '2010.cost.tuition.in_state': 38300,
      '2007.student.demographics.race_ethnicity.white_non_hispanic': 0.4869,
      '2013.aid.students_with_any_loan': 0.561827957,
      '2005.cost.tuition.out_of_state': 31460,
      '2008.student.grad_students': 4915,
      '2006.student.demographics.women': 0.4919,
      '2008.student.demographics.race_ethnicity.non_resident_alien': 0.086,
      '2009.student.demographics.race_ethnicity.white': 0,
      '2013.aid.loan_principal': 11000,
      '2011.cost.tuition.in_state': 40500,
      '2012.admissions.sat_scores.average.overall': 1488,
      '2013.admissions.admission_rate.overall': 0.0705,
      '2012.cost.tuition.in_state': 42300,
      '2014.admissions.admission_rate.overall': 0.063,
      '2012.student.demographics.race_ethnicity.black': 0.0656,
      '2014.student.demographics.women': 0.4902,
      '2014.student.demographics.race_ethnicity.black': 0.0678,
      '2007.student.grad_students': 4895,
      '2007.aid.loan_principal': 11625,
      '2006.aid.loan_principal': 11721,
      '2007.aid.students_with_any_loan': 0.8813793103,
      '2010.aid.students_with_any_loan': 0.6253132832,
      '2009.cost.tuition.in_state': 36500,
      '2014.cost.tuition.out_of_state': 45800,
      '2015.student.demographics.women': 0.4884,
      '2013.cost.tuition.in_state': 44000,
      '2009.student.demographics.women': 0.4987,
      '2005.student.demographics.race_ethnicity.black_non_hispanic': 0.0811,
      '2015.student.size': 5528,
      '2013.student.size': 5422,
      '2005.student.size': 5349,
      '2005.completion.completion_rate_4yr_100nt': 0.89764359351988,
      '2015.cost.tuition.out_of_state': 47600,
      '2005.student.grad_students': 4828,
      '2008.admissions.admission_rate.overall': 0.0989,
      '2010.admissions.admission_rate.overall': 0.0753,
      '2007.admissions.sat_scores.average.overall': 1471,
      '2007.student.size': 5291,
      '2011.student.size': 5333,
      '2009.student.demographics.race_ethnicity.white_non_hispanic': 0.4167,
      '2014.student.demographics.race_ethnicity.non_resident_alien': 0.104,
      '2015.admissions.admission_rate.overall': 0.0673,
      '2009.student.size': 5258,
      '2007.cost.tuition.in_state': 34530,
      '2015.cost.tuition.in_state': 47600,
      '2008.student.avg_dependent_income.2014dollars': 87601,
      '2009.cost.tuition.out_of_state': 36500,
      '2010.student.avg_dependent_income.2014dollars': 94031,
      '2013.admissions.sat_scores.average.overall': 1497,
      '2011.student.demographics.race_ethnicity.white': 0.4723,
      '2012.student.demographics.race_ethnicity.white': 0.4719,
      '2014.student.demographics.race_ethnicity.white': 0.4705,
      '2015.student.demographics.race_ethnicity.white': 0.4651,
      '2015.student.demographics.race_ethnicity.non_resident_alien': 0.106,
      '2011.student.grad_students': 6526,
      '2007.completion.completion_rate_4yr_100nt': 0.87006960556844,
      '2006.student.avg_dependent_income.2014dollars': 94813,
      '2013.student.demographics.race_ethnicity.white': 0.4734,
      '2012.student.avg_dependent_income.2014dollars': 92921,
      '2014.student.avg_dependent_income.2014dollars': 95354,
      '2014.aid.students_with_any_loan': 0.5576662144,
      '2010.student.demographics.race_ethnicity.white': 0.4666,
      '2010.cost.tuition.out_of_state': 38300,
      '2014.student.grad_students': 6859,
      '2006.completion.completion_rate_4yr_100nt': 0.88139362490733,
      '2005.cost.tuition.in_state': 31460,
      '2005.aid.loan_principal': 12766.5,
      '2015.student.demographics.race_ethnicity.asian': 0.1729,
      '2007.student.demographics.men': 0.5101,
      '2008.student.demographics.race_ethnicity.asian': 0,
      '2014.student.size': 5473,
      '2011.student.demographics.race_ethnicity.black': 0.063,
      '2011.student.demographics.race_ethnicity.asian': 0.1523,
      '2013.student.demographics.race_ethnicity.asian': 0.1645,
      '2005.student.demographics.women': 0.4907,
      '2008.cost.tuition.out_of_state': 35300,
      '2011.aid.loan_principal': 7822.5,
      '2015.completion.completion_rate_4yr_100nt': 0.8774,
      '2006.student.size': 5302,
      '2010.student.size': 5296,
      '2008.aid.students_with_any_loan': 0.7426273458,
      '2006.admissions.sat_scores.average.overall': 1474,
      '2012.student.demographics.men': 0.5027,
      '2013.student.grad_students': 6679,
      '2006.admissions.admission_rate.overall': 0.0967,
      '2006.student.demographics.race_ethnicity.black_non_hispanic': 0.0824,
      '2009.completion.completion_rate_4yr_100nt': 0.90444444444444,
      '2015.aid.loan_principal': 13000,
      '2008.student.demographics.race_ethnicity.white': 0,
      '2014.aid.loan_principal': 13000,
      '2014.admissions.sat_scores.average.overall': 1493,
      '2006.cost.tuition.in_state': 33030,
      '2015.student.grad_students': 6853,
      '2006.cost.tuition.out_of_state': 33030,
      '2013.student.demographics.race_ethnicity.black': 0.0673,
      '2010.admissions.sat_scores.average.overall': 1473,
      '2005.admissions.admission_rate.overall': 0.0995,
      '2011.student.demographics.women': 0.5014,
      '2008.student.demographics.race_ethnicity.white_non_hispanic': 0.4509,
      '2009.student.demographics.race_ethnicity.non_resident_alien': 0.0888,
      '2012.student.demographics.race_ethnicity.non_resident_alien': 0.1026,
      '2015.student.demographics.race_ethnicity.black': 0.068,
      '2008.aid.loan_principal': 10704,
      '2009.aid.loan_principal': 8380,
      '2011.completion.completion_rate_4yr_100nt': 0.88787878787878,
      '2013.student.avg_dependent_income.2014dollars': 91847,
      '2011.aid.students_with_any_loan': 0.6393861893,
      '2008.student.demographics.men': 0.5013,
      '2006.student.grad_students': 4852,
      '2008.student.demographics.women': 0.4987,
      '2010.student.grad_students': 6391,
      '2009.admissions.admission_rate.overall': 0.0856,
      '2010.aid.loan_principal': 7125,
      '2011.student.demographics.men': 0.4986,
      '2007.student.demographics.race_ethnicity.non_resident_alien': 0.0839,
      '2013.cost.tuition.out_of_state': 44000,
      '2013.student.demographics.men': 0.5063,
      '2012.aid.students_with_any_loan': 0.5778688525,
      '2014.cost.tuition.in_state': 45800,
      '2008.student.demographics.race_ethnicity.black_non_hispanic': 0.0869,
      '2012.aid.loan_principal': 9858,
      '2008.cost.tuition.in_state': 35300,
      '2005.admissions.sat_scores.average.overall': 1471,
      '2011.student.demographics.race_ethnicity.non_resident_alien': 0.1014,
      '2006.student.demographics.race_ethnicity.white_non_hispanic': 0.5004,
      '2014.completion.completion_rate_4yr_100nt': 0.8739,
      '2005.aid.students_with_any_loan': 0.9439953811,
      '2009.admissions.sat_scores.average.overall': 1475,
      '2012.cost.tuition.out_of_state': 42300,
      '2012.student.grad_students': 6501,
      '2005.student.demographics.race_ethnicity.non_resident_alien': 0.0817,
      '2013.student.demographics.women': 0.4937,
      '2009.student.avg_dependent_income.2014dollars': 87518,
      '2007.student.avg_dependent_income.2014dollars': 93040,
      '2013.completion.completion_rate_4yr_100nt': 0.8964,
      '2012.student.demographics.women': 0.4973,
      '2006.aid.students_with_any_loan': 0.9344675488,
      '2015.student.demographics.men': 0.5116,
      '2006.student.demographics.men': 0.5081,
      '2005.student.demographics.race_ethnicity.white_non_hispanic': 0.5106,
      '2011.cost.tuition.out_of_state': 40500,
      '2006.student.demographics.race_ethnicity.non_resident_alien': 0.083,
      '2011.admissions.sat_scores.average.overall': 1497,
      '2007.student.demographics.women': 0.4899,
      '2005.student.avg_dependent_income.2014dollars': 89241,
      '2011.student.avg_dependent_income.2014dollars': 96192,
      '2015.student.avg_dependent_income.2014dollars': 89141,
      '2008.student.demographics.race_ethnicity.black': 0,
      '2007.admissions.admission_rate.overall': 0.089,
      '2009.student.demographics.race_ethnicity.black': 0,
      '2009.student.demographics.race_ethnicity.black_non_hispanic': 0.0852,
      '2012.completion.completion_rate_4yr_100nt': 0.89032749428789,
      '2005.student.demographics.men': 0.5093,
      '2011.admissions.admission_rate.overall': 0.0788,
      '2005.student.demographics.race_ethnicity.black': null,
      '2006.student.demographics.race_ethnicity.black': null,
      '2007.student.demographics.race_ethnicity.black': null,
      '2010.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2011.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2012.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2013.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2014.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2015.student.demographics.race_ethnicity.black_non_hispanic': null,
      '2005.student.demographics.race_ethnicity.asian': null,
      '2006.student.demographics.race_ethnicity.asian': null,
      '2007.student.demographics.race_ethnicity.asian': null,
      '2005.student.demographics.race_ethnicity.white': null,
      '2006.student.demographics.race_ethnicity.white': null,
      '2007.student.demographics.race_ethnicity.white': null,
      '2010.student.demographics.race_ethnicity.white_non_hispanic': null,
      '2011.student.demographics.race_ethnicity.white_non_hispanic': null,
      '2012.student.demographics.race_ethnicity.white_non_hispanic': null,
      '2013.student.demographics.race_ethnicity.white_non_hispanic': null,
      '2014.student.demographics.race_ethnicity.white_non_hispanic': null,
      '2015.student.demographics.race_ethnicity.white_non_hispanic': null
    };
    const expectedResult = {
      completion: {
        2005: 0.89764359351988,
        2006: 0.88139362490733,
        2007: 0.87006960556844,
        2008: 0.8960739030023,
        2009: 0.90444444444444,
        2010: 0.88897396630934,
        2011: 0.88787878787878,
        2012: 0.89032749428789,
        2013: 0.8964,
        2014: 0.8739,
        2015: 0.8774
      },
      cost: {
        inState: {
          2005: 31460,
          2006: 33030,
          2007: 34530,
          2008: 35300,
          2009: 36500,
          2010: 38300,
          2011: 40500,
          2012: 42300,
          2013: 44000,
          2014: 45800,
          2015: 47600
        },
        outState: {
          2005: 31460,
          2006: 33030,
          2007: 34530,
          2008: 35300,
          2009: 36500,
          2010: 38300,
          2011: 40500,
          2012: 42300,
          2013: 44000,
          2014: 45800,
          2015: 47600
        }
      },
      student: {
        size: {
          2005: 5349,
          2006: 5302,
          2007: 5291,
          2008: 5256,
          2009: 5258,
          2010: 5296,
          2011: 5333,
          2012: 5397,
          2013: 5422,
          2014: 5473,
          2015: 5528
        },
        gradStudents: {
          2005: 4828,
          2006: 4852,
          2007: 4895,
          2008: 4915,
          2009: 6318,
          2010: 6391,
          2011: 6526,
          2012: 6501,
          2013: 6679,
          2014: 6859,
          2015: 6853
        },
        menShare: {
          2005: 0.5093,
          2006: 0.5081,
          2007: 0.5101,
          2008: 0.5013,
          2009: 0.5013,
          2010: 0.4962,
          2011: 0.4986,
          2012: 0.5027,
          2013: 0.5063,
          2014: 0.5098,
          2015: 0.5116
        },
        womenShare: {
          2005: 0.4907,
          2006: 0.4919,
          2007: 0.4899,
          2008: 0.4987,
          2009: 0.4987,
          2010: 0.5038,
          2011: 0.5014,
          2012: 0.4973,
          2013: 0.4937,
          2014: 0.4902,
          2015: 0.4884
        },
        nonResidentAlien: {
          2005: 0.0817,
          2006: 0.083,
          2007: 0.0839,
          2008: 0.086,
          2009: 0.0888,
          2010: 0.0982,
          2011: 0.1014,
          2012: 0.1026,
          2013: 0.1051,
          2014: 0.104,
          2015: 0.106
        },
        black: {
          2005: 0.0811,
          2006: 0.0824,
          2007: 0.0877,
          2008: 0.0869,
          2009: 0.0852,
          2010: 0.0597,
          2011: 0.063,
          2012: 0.0656,
          2013: 0.0673,
          2014: 0.0678,
          2015: 0.068
        },
        asian: {
          2005: null,
          2006: null,
          2007: null,
          2008: 0,
          2009: 0,
          2010: 0.1414,
          2011: 0.1523,
          2012: 0.1608,
          2013: 0.1645,
          2014: 0.1655,
          2015: 0.1729
        },
        white: {
          2005: 0.5106,
          2006: 0.5004,
          2007: 0.4869,
          2008: 0.4509,
          2009: 0.4167,
          2010: 0.4666,
          2011: 0.4723,
          2012: 0.4719,
          2013: 0.4734,
          2014: 0.4705,
          2015: 0.4651
        },
        avgIncome: {
          2005: 89241,
          2006: 94813,
          2007: 93040,
          2008: 87601,
          2009: 87518,
          2010: 94031,
          2011: 96192,
          2012: 92921,
          2013: 91847,
          2014: 95354,
          2015: 89141
        }
      },
      admission: {
        satScore: {
          2005: 1471,
          2006: 1474,
          2007: 1471,
          2008: 1481,
          2009: 1475,
          2010: 1473,
          2011: 1497,
          2012: 1488,
          2013: 1497,
          2014: 1493,
          2015: 1498
        },
        rate: {
          2005: 0.0995,
          2006: 0.0967,
          2007: 0.089,
          2008: 0.0989,
          2009: 0.0856,
          2010: 0.0753,
          2011: 0.0788,
          2012: 0.0773,
          2013: 0.0705,
          2014: 0.063,
          2015: 0.0673
        }
      },
      aid: {
        loanPrincipal: {
          2005: 12766.5,
          2006: 11721,
          2007: 11625,
          2008: 10704,
          2009: 8380,
          2010: 7125,
          2011: 7822.5,
          2012: 9858,
          2013: 11000,
          2014: 13000,
          2015: 13000
        },
        numberOfStudentsOnLoan: {
          2005: 0.9439953811,
          2006: 0.9344675488,
          2007: 0.8813793103,
          2008: 0.7426273458,
          2009: 0.5790816327,
          2010: 0.6253132832,
          2011: 0.6393861893,
          2012: 0.5778688525,
          2013: 0.561827957,
          2014: 0.5576662144,
          2015: 0.4772727273
        }
      }
    };
    expect(eduDataParser(jsonData)).toEqual(expectedResult);
  });
});
